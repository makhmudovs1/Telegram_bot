# Телеграмм бот, находящий информацию по похожим вопросам.
> У поступающих в МФТИ есть множество вопросов, которые разбросаны по множествам источников. Было бы удобно собрать информацию в одном месте, а также легко с нем оперировать. В качестве помощника может выступать данный телеграмм-бот, который по заданному сообщению выдает родственные запросы.

## Подготовка к использованию

Для использования необходимы python3, а также библиотеки aiogram, pymystem3.
Клонируйте репозиторий, а после введите:

```shell
pip install aiogram
pip install pymystem3
```

Далее необходимо настроить файл `config.py`.

1. Получите токен бота у BotFather: [обучающая статья](#https://botcreators.ru/blog/botfather-instrukciya/) и вставьте его в `config.py::BOT_TOKEN`.
2. Заполните соотвествующие id, где  
    - `config.py::support_ids` - люди, получающие уведомления о ключевых операциях с ботом.
    - `config.py::ADMINS` - люди, отвечающие на запросы.
    - `config.py::admin_id` - главный админ.

После достаточно запустить 
```shell
python3 ./scripts/main.py
```
## Функционал

### Краткое описание

Для пользователя присутствует 2 режима:
 - Найти запрос среди уже присутствующих в базе данных
 - Начать диалог с одним из админов, который выбирается произвольным образом. 

### Комманды
Для пользователя:
- `/find` - Найти похожий вопрос
- `/support` - Написать сообщение (одно) модератору
- `/support_call` - Пообщаться с модератором (переписка)

Для админов:
- `/new_quest` - Добавить новый вопрос в базу данных.


## Особенности реализации

### Анализ сообщения
Лексический анализ сообщения происходит на основе системы [mystem](#https://nlpub.ru/Mystem), далее происходит сравнение по ключевых словам в базе данным и поступившем запросе.

### Хранение вопросов
При добавлении нового вопроса используется парсинг сайта с синонимами https://sin.slovaronline.com/search. Стоит помнить, что разбор запросы актуален на 2022 год, поэтому в случае возникновения ошибок либо стоит отключить данный модуль (см. файл `new_quest.py`), либо проанализировать тело результата самостоятельно.

База данных представляет из себя:
 - вопрос - `question`
 - ответ - `answer`
 - изображение к ответу - `photo`

*Замечание:* в момент создание автор плохо ориентировался в sql, поэтому база данных не соответсвует даже первой нормальной форме. Если вы хотите использовать данную реализацию, то необходимо добавить еще одну связующую таблицу, которая уберет связь многие к многим.
